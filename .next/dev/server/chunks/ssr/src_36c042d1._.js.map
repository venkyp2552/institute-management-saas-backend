{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Gen_AI/institute-management-saas-/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\r\n            \"rounded-xl border border-border bg-card text-card-foreground shadow-card hover:shadow-card-hover transition-all duration-200 hover:-translate-y-0.5\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\"flex flex-col space-y-1.5 p-8 pb-4\", className)}\r\n        {...props}\r\n    />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n    HTMLParagraphElement,\r\n    React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n    <h3\r\n        ref={ref}\r\n        className={cn(\r\n            \"font-heading text-h3 font-semibold leading-none tracking-tight text-foreground\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n    HTMLParagraphElement,\r\n    React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n    <p\r\n        ref={ref}\r\n        className={cn(\"text-sm text-muted-foreground leading-relaxed\", className)}\r\n        {...props}\r\n    />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div ref={ref} className={cn(\"p-8 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\"flex items-center p-8 pt-0\", className)}\r\n        {...props}\r\n    />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACG,KAAK;QACL,WAAW,IAAA,yHAAE,EACT,uJACA;QAEH,GAAG,KAAK;;;;;;AAGjB,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACG,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGjB,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACG,KAAK;QACL,WAAW,IAAA,yHAAE,EACT,kFACA;QAEH,GAAG,KAAK;;;;;;AAGjB,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACG,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGjB,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAElE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACG,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGjB,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///D:/Gen_AI/institute-management-saas-/src/components/dashboard/add-student-modal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { X, Loader2 } from 'lucide-react'\r\nimport { toast } from 'sonner'\r\n\r\ninterface AddStudentModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onSuccess: () => void\r\n}\r\n\r\ninterface Batch {\r\n  id: string\r\n  name: string\r\n}\r\n\r\nexport function AddStudentModal({ isOpen, onClose, onSuccess }: AddStudentModalProps) {\r\n  const [formData, setFormData] = useState({\r\n    student_id: '',\r\n    full_name: '',\r\n    email: '',\r\n    phone: '',\r\n    parent_name: '',\r\n    parent_phone: '',\r\n    parent_email: '',\r\n    address: '',\r\n    date_of_birth: '',\r\n    batch_id: '',\r\n    admission_date: new Date().toISOString().split('T')[0]\r\n  })\r\n  const [batches, setBatches] = useState<Batch[]>([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState('')\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      fetchBatches()\r\n      generateStudentId()\r\n    }\r\n  }, [isOpen])\r\n\r\n  const fetchBatches = async () => {\r\n    try {\r\n      const response = await fetch('/api/dashboard/batches')\r\n      const data = await response.json()\r\n      if (response.ok) {\r\n        setBatches(data.batches || [])\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching batches:', error)\r\n    }\r\n  }\r\n\r\n  const generateStudentId = async () => {\r\n    try {\r\n      const response = await fetch('/api/dashboard/students')\r\n      const data = await response.json()\r\n      if (response.ok) {\r\n        const count = data.students?.length || 0\r\n        const nextId = String(count + 1).padStart(4, '0')\r\n        setFormData(prev => ({ ...prev, student_id: `STU${nextId}` }))\r\n      }\r\n    } catch (error) {\r\n      console.error('Error generating student ID:', error)\r\n    }\r\n  }\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value })\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    setError('')\r\n\r\n    try {\r\n      const response = await fetch('/api/dashboard/students', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData)\r\n      })\r\n\r\n      const data = await response.json()\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to add student')\r\n      }\r\n\r\n      toast.success('Student added successfully!')\r\n      onSuccess()\r\n      resetForm()\r\n    } catch (err: any) {\r\n      setError(err.message || 'Failed to add student')\r\n      toast.error(err.message || 'Failed to add student')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      student_id: '',\r\n      full_name: '',\r\n      email: '',\r\n      phone: '',\r\n      parent_name: '',\r\n      parent_phone: '',\r\n      parent_email: '',\r\n      address: '',\r\n      date_of_birth: '',\r\n      batch_id: '',\r\n      admission_date: new Date().toISOString().split('T')[0]\r\n    })\r\n    setError('')\r\n  }\r\n\r\n  const handleClose = () => {\r\n    resetForm()\r\n    onClose()\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n        <Card className=\"border-0 shadow-none\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between\">\r\n            <CardTitle>Add New Student</CardTitle>\r\n            <Button variant=\"ghost\" size=\"icon\" onClick={handleClose}>\r\n              <X className=\"h-4 w-4\" />\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n              {error && (\r\n                <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm\">{error}</div>\r\n              )}\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-1\">Student ID *</label>\r\n                  <input type=\"text\" name=\"student_id\" required value={formData.student_id} onChange={handleInputChange}\r\n                    className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\" placeholder=\"STU0001\" />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-1\">Full Name *</label>\r\n                  <input type=\"text\" name=\"full_name\" required value={formData.full_name} onChange={handleInputChange}\r\n                    className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\" placeholder=\"Student's full name\" />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-1\">Email</label>\r\n                  <input type=\"email\" name=\"email\" value={formData.email} onChange={handleInputChange}\r\n                    className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\" placeholder=\"student@example.com\" />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-1\">Phone</label>\r\n                  <input type=\"tel\" name=\"phone\" value={formData.phone} onChange={handleInputChange}\r\n                    className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\" placeholder=\"+1 (555) 123-4567\" />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-1\">Date of Birth</label>\r\n                  <input type=\"date\" name=\"date_of_birth\" value={formData.date_of_birth} onChange={handleInputChange}\r\n                    className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\" />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-1\">Batch/Class</label>\r\n                  <select name=\"batch_id\" value={formData.batch_id} onChange={handleInputChange}\r\n                    className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\">\r\n                    <option value=\"\">Select a batch</option>\r\n                    {batches.map((batch) => (\r\n                      <option key={batch.id} value={batch.id}>{batch.name}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-1\">Admission Date</label>\r\n                  <input type=\"date\" name=\"admission_date\" value={formData.admission_date} onChange={handleInputChange}\r\n                    className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"border-t pt-4\">\r\n                <h3 className=\"text-lg font-medium text-slate-900 mb-4\">Parent/Guardian Information</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-slate-700 mb-1\">Parent Name</label>\r\n                    <input type=\"text\" name=\"parent_name\" value={formData.parent_name} onChange={handleInputChange}\r\n                      className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\" placeholder=\"Parent's full name\" />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-slate-700 mb-1\">Parent Phone</label>\r\n                    <input type=\"tel\" name=\"parent_phone\" value={formData.parent_phone} onChange={handleInputChange}\r\n                      className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\" placeholder=\"+1 (555) 123-4567\" />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-slate-700 mb-1\">Parent Email</label>\r\n                    <input type=\"email\" name=\"parent_email\" value={formData.parent_email} onChange={handleInputChange}\r\n                      className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\" placeholder=\"parent@example.com\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-slate-700 mb-1\">Address</label>\r\n                <textarea name=\"address\" rows={3} value={formData.address} onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary\" placeholder=\"Full address\" />\r\n              </div>\r\n\r\n              <div className=\"flex justify-end space-x-3 pt-4\">\r\n                <Button type=\"button\" variant=\"outline\" onClick={handleClose}>Cancel</Button>\r\n                <Button type=\"submit\" disabled={loading}>\r\n                  {loading ? (<><Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />Adding...</>) : 'Add Student'}\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 694, "column": 0}, "map": {"version":3,"sources":["file:///D:/Gen_AI/institute-management-saas-/src/app/dashboard/students/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Plus, Search, Edit, Trash2, Users } from 'lucide-react'\r\nimport { AddStudentModal } from '@/components/dashboard/add-student-modal'\r\nimport { toast } from 'sonner'\r\n\r\ninterface Student {\r\n  id: string\r\n  student_id: string\r\n  full_name: string\r\n  email: string\r\n  phone: string\r\n  batch_id: string\r\n  batches?: { name: string }\r\n  admission_date: string\r\n  is_active: boolean\r\n}\r\n\r\nexport default function StudentsPage() {\r\n  const [students, setStudents] = useState<Student[]>([])\r\n  const [filteredStudents, setFilteredStudents] = useState<Student[]>([])\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const [loading, setLoading] = useState(true)\r\n  const [showAddModal, setShowAddModal] = useState(false)\r\n\r\n  useEffect(() => {\r\n    fetchStudents()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const filtered = students.filter(student =>\r\n      student.full_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      student.student_id?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      student.email?.toLowerCase().includes(searchTerm.toLowerCase())\r\n    )\r\n    setFilteredStudents(filtered)\r\n  }, [students, searchTerm])\r\n\r\n  const fetchStudents = async () => {\r\n    try {\r\n      const response = await fetch('/api/dashboard/students')\r\n      const data = await response.json()\r\n\r\n      if (response.ok) {\r\n        setStudents(data.students || [])\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching students:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleDeleteStudent = async (studentId: string) => {\r\n    if (!confirm('Are you sure you want to delete this student?')) return\r\n\r\n    try {\r\n      const response = await fetch(`/api/dashboard/students?id=${studentId}`, {\r\n        method: 'DELETE'\r\n      })\r\n\r\n      if (response.ok) {\r\n        setStudents(students.filter(s => s.id !== studentId))\r\n        toast.success('Student deleted successfully')\r\n      } else {\r\n        toast.error('Failed to delete student')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting student:', error)\r\n      toast.error('Failed to delete student')\r\n    }\r\n  }\r\n\r\n  const toggleStudentStatus = async (studentId: string, currentStatus: boolean) => {\r\n    try {\r\n      const response = await fetch('/api/dashboard/students', {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ id: studentId, is_active: !currentStatus })\r\n      })\r\n\r\n      if (response.ok) {\r\n        setStudents(students.map(s => \r\n          s.id === studentId ? { ...s, is_active: !currentStatus } : s\r\n        ))\r\n        toast.success('Student status updated')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating student status:', error)\r\n      toast.error('Failed to update student status')\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <div>\r\n            <h2 className=\"text-3xl font-bold font-heading\">Students</h2>\r\n            <p className=\"text-slate-600\">Manage your institute's students</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-64 bg-slate-200 rounded-lg\"></div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold font-heading\">Students</h2>\r\n          <p className=\"text-slate-600\">Manage your institute's students</p>\r\n        </div>\r\n        <Button onClick={() => setShowAddModal(true)}>\r\n          <Plus className=\"h-4 w-4 mr-2\" />\r\n          Add Student\r\n        </Button>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardContent className=\"p-6\">\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search students by name, ID, or email...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"pl-10 pr-4 py-2 w-full border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n            />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center\">\r\n            <Users className=\"h-5 w-5 mr-2\" />\r\n            Students ({filteredStudents.length})\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {filteredStudents.length > 0 ? (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-b border-slate-200\">\r\n                    <th className=\"text-left py-3 px-4 font-medium text-slate-600\">Student ID</th>\r\n                    <th className=\"text-left py-3 px-4 font-medium text-slate-600\">Name</th>\r\n                    <th className=\"text-left py-3 px-4 font-medium text-slate-600\">Email</th>\r\n                    <th className=\"text-left py-3 px-4 font-medium text-slate-600\">Batch</th>\r\n                    <th className=\"text-left py-3 px-4 font-medium text-slate-600\">Status</th>\r\n                    <th className=\"text-left py-3 px-4 font-medium text-slate-600\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {filteredStudents.map((student) => (\r\n                    <tr key={student.id} className=\"border-b border-slate-100 hover:bg-slate-50\">\r\n                      <td className=\"py-3 px-4 font-medium\">{student.student_id}</td>\r\n                      <td className=\"py-3 px-4\">{student.full_name}</td>\r\n                      <td className=\"py-3 px-4 text-slate-600\">{student.email || 'N/A'}</td>\r\n                      <td className=\"py-3 px-4\">\r\n                        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\r\n                          {student.batches?.name || 'No Batch'}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"py-3 px-4\">\r\n                        <button\r\n                          onClick={() => toggleStudentStatus(student.id, student.is_active)}\r\n                          className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                            student.is_active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n                          }`}\r\n                        >\r\n                          {student.is_active ? 'Active' : 'Inactive'}\r\n                        </button>\r\n                      </td>\r\n                      <td className=\"py-3 px-4\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <Button variant=\"ghost\" size=\"sm\">\r\n                            <Edit className=\"h-4 w-4\" />\r\n                          </Button>\r\n                          <Button variant=\"ghost\" size=\"sm\" onClick={() => handleDeleteStudent(student.id)}>\r\n                            <Trash2 className=\"h-4 w-4 text-red-500\" />\r\n                          </Button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-12\">\r\n              <Users className=\"h-12 w-12 text-slate-400 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-slate-900 mb-2\">No students found</h3>\r\n              <p className=\"text-slate-500 mb-4\">\r\n                {searchTerm ? 'No students match your search criteria.' : 'Get started by adding your first student.'}\r\n              </p>\r\n              {!searchTerm && (\r\n                <Button onClick={() => setShowAddModal(true)}>\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add First Student\r\n                </Button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <AddStudentModal\r\n        isOpen={showAddModal}\r\n        onClose={() => setShowAddModal(false)}\r\n        onSuccess={() => {\r\n          setShowAddModal(false)\r\n          fetchStudents()\r\n        }}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}